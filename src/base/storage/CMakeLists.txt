include(AddModule)

add_module(
    MODULE_NAME storage 
    HEADERS
        Database.h 
        ObjectStoreClient.h 
        ObjectStoreClientPlugin.h 
        block_store/Block.h
        block_store/BlockList.h
        block_store/BlockStore.h
        clients/file/FileObjectStoreClient.h
        clients/memory/InMemoryObjectStoreClient.h
        requests/ObjectStoreRequest.h
        requests/ObjectStoreResponse.h
        requests/ObjectStoreError.h 
    SOURCES
        ObjectStoreClient.cc
        ObjectStoreClientPlugin.cc
        block_store/Block.cc
        block_store/BlockList.cc
        block_store/BlockStore.cc
        clients/file/FileObjectStoreClient.cc
        clients/memory/InMemoryObjectStoreClient.cc
        requests/ObjectStoreRequest.cc
        requests/ObjectStoreResponse.cc
        requests/ObjectStoreError.cc
    INTERNAL_INCLUDE_DIRS
        block_store
        clients/file
        clients/memory
        requests
    INTERNAL_DEPENDENCIES 
        common
        protocol
    WITH_FILESYSTEM
)

add_subdirectory(clients/phobos)
add_subdirectory(clients/s3)