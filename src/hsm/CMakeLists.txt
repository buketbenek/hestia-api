include(AddModule)

add_subdirectory(base_types)
add_subdirectory(object_store)

add_module(
    MODULE_NAME hsm
    HEADERS
        data_placement_engine/BasicDataPlacementEngine.h 
        data_placement_engine/DataPlacementEngine.h
        data_placement_engine/DataPlacementEngineFactory.h
        dataset_service/Dataset.h 
        dataset_service/DatasetAdapter.h 
        dataset_service/DatasetService.h 
        distributed_hsm_service/DistributedHsmService.h
        distributed_hsm_service/DistributedHsmServiceRequest.h
        distributed_hsm_service/HsmNodeService.h
        distributed_hsm_service/model/HsmNode.h
        distributed_hsm_service/model/HsmNodeAdapter.h
        hsm_service/HsmService.h
        hsm_service/model/HsmAction.h
        hsm_service/model/HsmActionAdapter.h
        hsm_service/model/CompositeLayer.h
        hsm_service/requests/HsmServiceResponse.h 
        hsm_service/requests/HsmServiceRequest.h
        hsm_service/requests/HsmServiceError.h 
        key_value_store/KeyValueStoreClientFactory.h
        object_service/ObjectService.h
        tier_service/TierService.h 
        s3_service/HsmS3Service.h
    SOURCES
        dataset_service/DatasetAdapter.cc
        dataset_service/DatasetService.cc
        data_placement_engine/BasicDataPlacementEngine.cc
        data_placement_engine/DataPlacementEngineFactory.cc
        distributed_hsm_service/DistributedHsmService.cc
        distributed_hsm_service/DistributedHsmServiceRequest.cc
        distributed_hsm_service/HsmNodeService.cc
        distributed_hsm_service/model/HsmNodeAdapter.cc
        hsm_service/HsmService.cc
        hsm_service/model/HsmAction.cc
        hsm_service/model/HsmActionAdapter.cc
        hsm_service/model/CompositeLayer.cc
        hsm_service/requests/HsmServiceResponse.cc
        hsm_service/requests/HsmServiceRequest.cc
        hsm_service/requests/HsmServiceError.cc
        key_value_store/KeyValueStoreClientFactory.cc
        object_service/ObjectService.cc
        tier_service/TierService.cc 
        s3_service/HsmS3Service.cc
    INTERNAL_INCLUDE_DIRS
        data_placement_engine
        dataset_service
        distributed_hsm_service
        distributed_hsm_service/model/
        hsm_service
        hsm_service/model
        hsm_service/requests
        key_value_store
        object_service
        tier_service
        s3_service
    INTERNAL_DEPENDENCIES 
        hsm_object_store_client
        http_client
        event_feed
        s3app
)